<!DOCTYPE html>
<html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Email Campaign Manager v6.0 - PROFESSIONAL</title><style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Arial,sans-serif;background:#667eea;min-height:100vh;padding:15px}.container{max-width:1100px;margin:0 auto}header{background:#fff;padding:20px;border-radius:10px;margin-bottom:20px;box-shadow:0 4px 12px rgba(0,0,0,.1)}h1{color:#333;font-size:26px;margin-bottom:5px}h2{color:#333;margin-bottom:15px;font-size:16px;border-bottom:2px solid #667eea;padding-bottom:10px}.subtitle{color:#666;font-size:13px}.tabs{display:flex;gap:10px;margin-top:15px;border-bottom:2px solid #eee;flex-wrap:wrap}.tab-btn{padding:10px 20px;background:0;border:0;cursor:pointer;border-bottom:3px solid transparent;font-weight:600;color:#999;font-size:14px}.tab-btn:hover{color:#667eea}.tab-btn.active{color:#667eea;border-bottom-color:#667eea}.tab-content{display:none}.tab-content.active{display:block}.card{background:#fff;padding:20px;border-radius:10px;margin-bottom:15px;box-shadow:0 2px 8px rgba(0,0,0,.08)}.grid{display:grid;grid-template-columns:1fr 1fr;gap:15px;margin-bottom:15px}@media(max-width:768px){.grid{grid-template-columns:1fr}}.form-group{margin-bottom:12px}label{display:block;font-weight:600;color:#333;margin-bottom:4px;font-size:13px}input,textarea,select{width:100%;padding:10px;border:1px solid #ddd;border-radius:6px;font-size:14px;font-family:inherit}input:focus,textarea:focus,select:focus{outline:0;border-color:#667eea;box-shadow:0 0 0 3px rgba(102,126,234,.1)}button{padding:10px 20px;background:#667eea;color:#fff;border:0;border-radius:6px;cursor:pointer;font-weight:600;font-size:13px;transition:all .3s}button:hover{background:#5568d3;transform:translateY(-1px)}.btn-danger{background:#dc3545}.btn-danger:hover{background:#c82333}.btn-success{background:#28a745}.btn-success:hover{background:#218838}.btn-small{padding:6px 12px;font-size:12px;min-width:auto}table{width:100%;border-collapse:collapse;margin-top:10px;font-size:13px}th{background:#667eea;color:#fff;padding:10px;text-align:left;font-weight:600}td{padding:10px;border-bottom:1px solid #eee}tr:hover{background:#f9f9f9}.msg{padding:12px;border-radius:6px;margin-bottom:10px;display:none;font-size:13px}.msg-success{background:#d4edda;color:#155724;border:1px solid #c3e6cb}.msg-error{background:#f8d7da;color:#721c24;border:1px solid #f5c6cb}.msg-warning{background:#fff3cd;color:#856404;border:1px solid #ffeaa7}.loading{display:none;text-align:center;color:#667eea;padding:10px;font-size:13px}.file-upload{border:2px dashed #667eea;padding:20px;text-align:center;cursor:pointer;border-radius:6px;background:#f8f9ff}.file-upload:hover{background:#eff1ff;border-color:#5568d3}.file-upload input{display:none}.stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:10px;margin-bottom:15px}.stat{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;padding:15px;border-radius:8px;text-align:center}.stat-num{font-size:24px;font-weight:bold}.stat-label{font-size:12px;margin-top:5px}.overflow-x{overflow-x:auto}.log-item{padding:10px;border-left:4px solid #667eea;background:#f8f9ff;margin-bottom:8px;border-radius:4px;font-size:13px}.log-success{border-left-color:#28a745;background:#ecfdf5}.log-error{border-left-color:#dc3545;background:#fef2f2}.modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.7);z-index:1000}.modal.active{display:flex;align-items:center;justify-content:center}.modal-content{background:#fff;border-radius:10px;padding:25px;max-width:600px;width:90%;box-shadow:0 10px 40px rgba(0,0,0,.3)}.modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.modal-close{background:0;border:0;font-size:28px;cursor:pointer;color:#999}.tabs-inner{display:flex;gap:10px;margin-bottom:15px;border-bottom:1px solid #ddd}.tab-inner{padding:8px 15px;background:0;border:0;cursor:pointer;border-bottom:2px solid transparent;color:#666;font-weight:600;font-size:13px}.tab-inner:hover{color:#667eea}.tab-inner.active{color:#667eea;border-bottom-color:#667eea}.tab-inner-content{display:none}.tab-inner-content.active{display:block}textarea{min-height:100px;resize:vertical;font-family:'Courier New',monospace}</style></head><body><div class="container"><header><h1>ğŸ“§ Email Campaign Manager v6.0</h1><p class="subtitle">âœ“ Smart From field âœ“ All SMTP types âœ“ Professional emails âœ“ Production ready</p><div class="tabs"><button class="tab-btn active" onclick="switchTab('dashboard')">ğŸ“Š Dashboard</button><button class="tab-btn" onclick="switchTab('leads')">ğŸ‘¥ Leads</button><button class="tab-btn" onclick="switchTab('templates')">ğŸ“ Templates</button><button class="tab-btn" onclick="switchTab('campaigns')">ğŸš€ Campaigns</button><button class="tab-btn" onclick="switchTab('logs')">ğŸ“‹ Logs</button><button class="tab-btn" onclick="switchTab('smtp')">âš™ï¸ SMTP</button></div></header><div id="dashboard" class="tab-content active"><div class="stats"><div class="stat"><div class="stat-num" id="dashLeads">0</div><div class="stat-label">Leads</div></div><div class="stat"><div class="stat-num" id="dashTemplates">0</div><div class="stat-label">Templates</div></div><div class="stat"><div class="stat-num" id="dashCampaigns">0</div><div class="stat-label">Campaigns</div></div><div class="stat"><div class="stat-num" id="dashLogs">0</div><div class="stat-label">Emails</div></div></div><div class="card"><h2>âœ¨ v6.0 - Professional Features</h2><p style="color:#666;line-height:1.6">âœ“ Smart From field (Name <email>) âœ“ All SMTP types supported âœ“ Paste/upload leads âœ“ HTML templates âœ“ Real email sending âœ“ Complete logs âœ“ Lead preview âœ“ Production ready</p></div></div><div id="leads" class="tab-content"><div class="grid"><div class="card"><h2>â• Add Lead</h2><div id="addMsg" class="msg"></div><form id="addForm" onsubmit="addLead(event)"><div class="form-group"><label>First Name</label><input type="text" id="fn"></div><div class="form-group"><label>Last Name</label><input type="text" id="ln"></div><div class="form-group"><label>Email *</label><input type="email" id="em" required></div><div class="form-group"><label>Phone</label><input type="text" id="ph"></div><div class="form-group"><label>Address</label><input type="text" id="ad"></div><div class="form-group"><label>Price</label><input type="text" id="pr"></div><div class="form-group"><label>Type</label><input type="text" id="ty"></div><button type="submit" class="btn-success" style="width:100%">Add Lead</button></form></div><div class="card"><h2>ğŸ“¤ Import Leads</h2><div id="uploadMsg" class="msg"></div><div class="tabs-inner"><button class="tab-inner active" onclick="switchImportTab('paste')">Paste</button><button class="tab-inner" onclick="switchImportTab('upload')">Upload</button></div><div id="paste" class="tab-inner-content active"><div class="form-group" style="margin-bottom:0"><label>Paste CSV:</label><textarea id="pasteArea"></textarea><button type="button" class="btn-success" onclick="pasteLead()" style="width:100%;margin-top:10px">Paste & Import</button></div></div><div id="upload" class="tab-inner-content"><div class="file-upload" onclick="document.getElementById('file').click()"><input type="file" id="file" accept=".csv,.xlsx,.xls" onchange="uploadFile(event)"><p style="color:#667eea;font-weight:600">ğŸ“ Click to upload CSV/Excel</p></div></div><div class="loading" id="importLoading">â³ Processing...</div><div id="importStats" style="display:none;margin-top:10px"><div style="padding:10px;background:#d4edda;border-radius:6px;margin-bottom:8px;color:#155724;font-size:13px">âœ“ Added: <strong id="addedCount">0</strong></div><div style="padding:10px;background:#fff3cd;border-radius:6px;color:#856404;font-size:13px">âš  Failed: <strong id="failedCount">0</strong></div></div></div></div><div class="card"><h2>ğŸ“‹ All Leads</h2><div style="margin-bottom:10px"><input type="text" id="searchLead" placeholder="Search..." style="max-width:300px" oninput="renderLeads()"><button class="btn-small" onclick="exportLeads()" style="margin-left:5px">ğŸ“¥ Export</button><button class="btn-small btn-danger" onclick="clearAllData()" style="margin-left:5px">ğŸ—‘ï¸ Clear</button></div><div class="overflow-x"><table><thead><tr><th>First</th><th>Last</th><th>Email</th><th>Phone</th><th>Address</th><th>Price</th><th>Type</th><th></th><th></th></tr></thead><tbody id="leadsTable"><tr><td colspan="9">No leads</td></tr></tbody></table></div></div></div><div id="templates" class="tab-content"><div class="grid"><div class="card"><h2>ğŸ“š Templates</h2><button class="btn-success" onclick="newTemplate()" style="width:100%;margin-bottom:10px">+ New</button><div id="templatesList"></div></div><div class="card"><h2>âœï¸ Editor</h2><div id="templateMsg" class="msg"></div><div id="templateEditor" style="display:none"><form id="templateForm" onsubmit="saveTemplate(event)"><div class="form-group"><label>Name</label><input type="text" id="tname" required></div><div class="form-group"><label>Subject</label><input type="text" id="tsubject" required></div><div class="form-group"><label>HTML</label><textarea id="tcontent" required></textarea></div><button type="submit" class="btn-success" style="width:100%">Save</button><button type="button" class="btn-small" onclick="cancelTemplate()" style="width:100%;margin-top:5px;background:#999">Cancel</button></form></div><div id="noTemplate" style="text-align:center;color:#999;padding:30px">Select template</div></div></div><div id="campaigns" class="tab-content"><div class="grid"><div class="card"><h2>ğŸš€ Send Campaign</h2><div id="campaignMsg" class="msg"></div><form id="campaignForm" onsubmit="sendCampaign(event)"><div class="form-group"><label>Template *</label><select id="ctemplate" required><option value="">Select...</option></select></div><div class="form-group"><label>Zoom Link</label><input type="url" id="czoom"></div><div class="form-group"><label>Meeting Date</label><input type="text" id="cdate" placeholder="Feb 14"></div><div class="form-group"><label>Meeting Time</label><input type="text" id="ctime" placeholder="3:00 PM EST"></div><div class="loading" id="campaignLoading">â³ Sending...</div><button type="submit" class="btn-success" style="width:100%">Send to All Leads</button></form></div><div class="card"><h2>ğŸ“Š Status</h2><p id="campaignStatus" style="color:#666;font-size:14px">Ready to send</p></div></div><div id="logs" class="tab-content"><div class="card"><h2>ğŸ“‹ Sending Logs</h2><div style="margin-bottom:10px"><button class="btn-small" onclick="loadLogs()" style="margin-right:5px">ğŸ”„ Refresh</button><button class="btn-small btn-danger" onclick="clearLogs()">Clear</button></div><div id="logsList" style="max-height:600px;overflow-y:auto"><div style="text-align:center;color:#999;padding:40px">No logs yet</div></div></div><div id="smtp" class="tab-content"><div class="grid"><div class="card"><h2>âš™ï¸ SMTP Config</h2><div id="smtpMsg" class="msg"></div><form id="smtpForm" onsubmit="saveSmtp(event)"><div class="form-group"><label>SMTP Host *</label><input type="text" id="shost" required placeholder="smtp.gmail.com"></div><div class="form-group"><label>Port *</label><input type="number" id="sport" required value="587"></div><div class="form-group"><label>Encryption</label><select id="ssecure"><option value="false">TLS (587)</option><option value="true">SSL (465)</option></select></div><div class="form-group"><label>Auth Email/Username *</label><input type="email" id="suser" required placeholder="your-email@gmail.com"></div><div class="form-group"><label>Password/App Password *</label><input type="password" id="spass" required></div><div class="form-group" style="border:2px solid #667eea;padding:10px;border-radius:6px;background:#f8f9ff"><label style="font-weight:bold;color:#667eea">Email Sender (From Field)</label><div class="form-group" style="margin-top:10px"><label>Sender Name</label><input type="text" id="ssendername" placeholder="John Smith or Company Name"></div><div class="form-group"><label>From Email Address</label><input type="email" id="sfrom" placeholder="sender@company.com (leave blank to use auth email)"></div><p style="font-size:12px;color:#666;margin-top:8px">Recipients will see: "Sender Name &lt;From Email&gt;" in their inbox</p></div><div class="form-group"><label>Company Name</label><input type="text" id="scompany" placeholder="Your Real Estate Company"></div><div class="form-group"><label>Company Phone</label><input type="text" id="sphone" placeholder="+1-555-1234"></div><button type="submit" class="btn-success" style="width:100%">Save Instantly</button></form></div><div class="card"><h2>ğŸ§ª Test SMTP</h2><button onclick="testSmtp()" class="btn-success" style="width:100%;margin-bottom:10px">Test Connection</button><div id="testResult" class="msg"></div><label style="margin-top:10px">Test Email Address</label><input type="email" id="testEmail" placeholder="your@email.com"><button onclick="sendTestEmail()" class="btn-success" style="width:100%;margin-top:10px">Send Test Email</button></div></div></div><div id="previewModal" class="modal"><div class="modal-content"><div class="modal-header"><h2>ğŸ‘ï¸ Lead Details</h2><button class="modal-close" onclick="closeModal()">&times;</button></div><div id="previewContent"></div></div></div><script>const API='/api';let leads=[],templates=[],logs=[],editId=null;function switchTab(tab){document.querySelectorAll('.tab-content').forEach(e=>e.classList.remove('active'));document.querySelectorAll('.tab-btn').forEach(e=>e.classList.remove('active'));document.getElementById(tab).classList.add('active');event.target.classList.add('active');if(tab==='leads')loadLeads();if(tab==='templates')loadTemplates();if(tab==='campaigns'){loadLeads();loadTemplates()};if(tab==='logs')loadLogs();if(tab==='dashboard')loadDash()}function switchImportTab(tab){document.querySelectorAll('.tab-inner-content').forEach(e=>e.classList.remove('active'));document.querySelectorAll('.tab-inner').forEach(e=>e.classList.remove('active'));document.getElementById(tab).classList.add('active');event.target.classList.add('active')}function showMsg(id,text,type){const el=document.getElementById(id);el.textContent=text;el.className='msg msg-'+type;el.style.display='block';setTimeout(()=>el.style.display='none',5000)}async function loadDash(){leads=await fetch(`${API}/leads`).then(r=>r.json()).catch(()=>[]);templates=await fetch(`${API}/templates`).then(r=>r.json()).catch(()=>[]);logs=await fetch(`${API}/campaigns/logs`).then(r=>r.json()).catch(()=>[]);document.getElementById('dashLeads').textContent=leads.length;document.getElementById('dashTemplates').textContent=templates.length;document.getElementById('dashCampaigns').textContent=[...new Set(logs.map(l=>l.campaignId))].length;document.getElementById('dashLogs').textContent=logs.length}async function loadLeads(){leads=await fetch(`${API}/leads`).then(r=>r.json()).catch(()=>[]);renderLeads()}function renderLeads(){const search=document.getElementById('searchLead')?.value?.toLowerCase()||'';const f=leads.filter(l=>(l.firstName+l.lastName+l.email).toLowerCase().includes(search));const html=f.length?f.map(l=>`<tr><td>${l.firstName||'â€”'}</td><td>${l.lastName||'â€”'}</td><td>${l.email}</td><td>${l.phone||'â€”'}</td><td>${l.propertyAddress||'â€”'}</td><td style="color:#28a745;font-weight:600">${l.propertyPrice||'â€”'}</td><td>${l.propertyType||'â€”'}</td><td><button class="btn-small" onclick="previewLead(${l.id})">ğŸ‘ï¸</button></td><td><button class="btn-small btn-danger" onclick="deleteLead(${l.id})">ğŸ—‘ï¸</button></td></tr>`).join(''):'<tr><td colspan="9">No leads</td></tr>';document.getElementById('leadsTable').innerHTML=html}function previewLead(id){const lead=leads.find(l=>l.id===id);if(!lead)return;document.getElementById('previewContent').innerHTML=`<div style="line-height:1.8"><p><strong>Name:</strong> ${lead.firstName} ${lead.lastName}</p><p><strong>Email:</strong> ${lead.email}</p><p><strong>Phone:</strong> ${lead.phone||'N/A'}</p><p><strong>Property:</strong> ${lead.propertyAddress||'N/A'}</p><p><strong>Price:</strong> ${lead.propertyPrice||'N/A'}</p><p><strong>Type:</strong> ${lead.propertyType||'N/A'}</p><p><strong>Added:</strong> ${new Date(lead.createdAt).toLocaleString()}</p></div>`;document.getElementById('previewModal').classList.add('active')}function closeModal(){document.getElementById('previewModal').classList.remove('active')}async function addLead(e){e.preventDefault();const r=await fetch(`${API}/leads`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({firstName:document.getElementById('fn').value,lastName:document.getElementById('ln').value,email:document.getElementById('em').value,phone:document.getElementById('ph').value,propertyAddress:document.getElementById('ad').value,propertyPrice:document.getElementById('pr').value,propertyType:document.getElementById('ty').value})}).then(r=>r.json());if(r.success){document.getElementById('addForm').reset();showMsg('addMsg','âœ“ Lead added!','success');loadLeads()}else showMsg('addMsg','âœ— '+r.error,'error')}async function pasteLead(){const text=document.getElementById('pasteArea').value;if(!text){showMsg('uploadMsg','âš  Paste data first','warning');return}document.getElementById('importLoading').style.display='block';const r=await fetch(`${API}/leads/paste`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({text})}).then(r=>r.json()).catch(()=>({inserted:0,failed:0}));document.getElementById('addedCount').textContent=r.inserted||0;document.getElementById('failedCount').textContent=r.failed||0;document.getElementById('importStats').style.display='block';showMsg('uploadMsg',`âœ“ ${r.inserted||0} added!`,'success');document.getElementById('importLoading').style.display='none';document.getElementById('pasteArea').value='';loadLeads()}async function uploadFile(e){const file=e.target.files[0];if(!file)return;document.getElementById('importLoading').style.display='block';const fd=new FormData();fd.append('file',file);const r=await fetch(`${API}/leads/upload`,{method:'POST',body:fd}).then(r=>r.json()).catch(()=>({inserted:0,failed:0}));document.getElementById('addedCount').textContent=r.inserted||0;document.getElementById('failedCount').textContent=r.failed||0;document.getElementById('importStats').style.display='block';showMsg('uploadMsg',`âœ“ ${r.inserted||0} added!`,'success');document.getElementById('importLoading').style.display='none';loadLeads()}async function deleteLead(id){if(confirm('Delete?')){await fetch(`${API}/leads/${id}`,{method:'DELETE'});loadLeads()}}function exportLeads(){const csv='First,Last,Email,Phone,Address,Price,Type\n'+leads.map(l=>`"${l.firstName||''}","${l.lastName||''}","${l.email}","${l.phone||''}","${l.propertyAddress||''}","${l.propertyPrice||''}","${l.propertyType||''}"`).join('\n');const a=document.createElement('a');a.href='data:text/csv,'+encodeURIComponent(csv);a.download='leads.csv';a.click()}async function clearAllData(){if(confirm('ğŸ—‘ï¸ Delete ALL? Cannot undo!')){const r=await fetch(`${API}/clear-all`,{method:'POST'}).then(r=>r.json());if(r.success){leads=[];templates=[];logs=[];renderLeads();loadTemplates();loadLogs();showMsg('addMsg','âœ“ Cleared!','success')}}}async function loadTemplates(){templates=await fetch(`${API}/templates`).then(r=>r.json()).catch(()=>[]);const html=templates.map(t=>`<div style="padding:10px;border:1px solid #ddd;border-radius:6px;margin-bottom:10px;cursor:pointer" onclick="editTemplate(${t.id})">${t.name}<br><small>${t.subject.substring(0,40)}</small></div>`).join('');document.getElementById('templatesList').innerHTML=html;document.getElementById('ctemplate').innerHTML='<option value="">Select...</option>'+templates.map(t=>`<option value="${t.id}">${t.name}</option>`).join('')}function newTemplate(){editId=null;document.getElementById('tname').value='';document.getElementById('tsubject').value='';document.getElementById('tcontent').value='';document.getElementById('templateEditor').style.display='block';document.getElementById('noTemplate').style.display='none'}function editTemplate(id){const t=templates.find(x=>x.id===id);if(t){editId=id;document.getElementById('tname').value=t.name;document.getElementById('tsubject').value=t.subject;document.getElementById('tcontent').value=t.html;document.getElementById('templateEditor').style.display='block';document.getElementById('noTemplate').style.display='none'}}function cancelTemplate(){document.getElementById('templateEditor').style.display='none';document.getElementById('noTemplate').style.display='block'}async function saveTemplate(e){e.preventDefault();const r=await fetch(`${API}/templates`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({id:editId,name:document.getElementById('tname').value,subject:document.getElementById('tsubject').value,html:document.getElementById('tcontent').value})}).then(r=>r.json());if(r.success){showMsg('templateMsg','âœ“ Saved!','success');cancelTemplate();loadTemplates()}else showMsg('templateMsg','âœ— Error','error')}async function sendCampaign(e){e.preventDefault();const tid=document.getElementById('ctemplate').value;if(!tid){showMsg('campaignMsg','âš  Select template','warning');return}document.getElementById('campaignLoading').style.display='block';const r=await fetch(`${API}/campaigns/send`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({templateId:parseInt(tid),zoomLink:document.getElementById('czoom').value,meetingDate:document.getElementById('cdate').value,meetingTime:document.getElementById('ctime').value})}).then(r=>r.json());document.getElementById('campaignLoading').style.display='none';if(r.success){showMsg('campaignMsg',`âœ“ Sent: ${r.sent} success, ${r.failed} failed!`,'success');document.getElementById('campaignForm').reset();document.getElementById('campaignStatus').textContent=`âœ“ Last: ${r.sent} delivered, ${r.failed} failed`;loadLogs()}else showMsg('campaignMsg','âœ— '+r.error,'error')}async function loadLogs(){logs=await fetch(`${API}/campaigns/logs`).then(r=>r.json()).catch(()=>[]);const html=logs.length?logs.map(l=>`<div class="log-item log-${l.status}"><strong>${l.leadName}</strong> (${l.leadEmail})<br><small>${l.message} - ${new Date(l.timestamp).toLocaleString()}</small></div>`).join(''):'<div style="text-align:center;color:#999;padding:40px">No logs</div>';document.getElementById('logsList').innerHTML=html}function clearLogs(){if(confirm('Clear logs?')){logs=[];document.getElementById('logsList').innerHTML='<div style="text-align:center;color:#999;padding:40px">Cleared</div>'}}async function loadSmtp(){const s=await fetch(`${API}/smtp-settings`).then(r=>r.json()).catch(()=>({}));document.getElementById('shost').value=s.host||'';document.getElementById('sport').value=s.port||587;document.getElementById('ssecure').value=s.secure?'true':'false';document.getElementById('suser').value=s.user||'';document.getElementById('spass').value=s.pass||'';document.getElementById('ssendername').value=s.senderName||'';document.getElementById('sfrom').value=s.fromEmail||'';document.getElementById('scompany').value=s.companyName||'';document.getElementById('sphone').value=s.companyPhone||''}async function saveSmtp(e){e.preventDefault();const r=await fetch(`${API}/smtp-settings`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({host:document.getElementById('shost').value,port:parseInt(document.getElementById('sport').value),secure:document.getElementById('ssecure').value==='true',user:document.getElementById('suser').value,pass:document.getElementById('spass').value,senderName:document.getElementById('ssendername').value,fromEmail:document.getElementById('sfrom').value,companyName:document.getElementById('scompany').value,companyPhone:document.getElementById('sphone').value})}).then(r=>r.json());if(r.success)showMsg('smtpMsg','âœ“ Saved!','success');else showMsg('smtpMsg','âœ— Error','error')}async function testSmtp(){const r=await fetch(`${API}/smtp-test`,{method:'POST'}).then(r=>r.json());showMsg('testResult',r.success?'âœ“ '+r.message:'âœ— '+r.error,r.success?'success':'error')}async function sendTestEmail(){const email=document.getElementById('testEmail').value;if(!email){showMsg('smtpMsg','âš  Enter email','warning');return}const r=await fetch(`${API}/smtp-test-email`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email})}).then(r=>r.json());showMsg('testResult',r.success?'âœ“ '+r.message:'âœ— '+r.error,r.success?'success':'error')}loadDash();loadSmtp();</script></body></html>
